<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><p><a href="http://wizcorp.jp"><img src="images/wizcorp-logo.png" alt="Wizcorp"></a></p>

<h1>Name</h1>

<p>Banalize - static code analyzer for Bash</p>

<p><img src="images/banalize.png" alt="banalize"></p>

<h2>Version 0.1</h2>

<h1>Description</h1>

<p>Banalizer is syntax analyzer for bash scripts. It is modelled after ideas of <a href="http://en.wikipedia.org/wiki/Perl::Critic"><code>Perl::Critic</code></a> static analyzer for Perl. Most of the Banalizer is written in Ruby. Exception is policy files which are language agnostic, and can be written in any language: scripting or compiled.</p>

<p>Banalizer consists of main binary file, banalyzer libraries, command line interface (CLI) and policies. </p>

<p>Policy is requirement for bash script/file. For example: each script must have &#39;shebang&#39; as first line.</p>

<p>Each policy is implemented as Ruby or other programming/scripting language file able to perform single check on single bash script file. Rest - aggregating checks, reporting, filtering etc - is handled by Banalizer.</p>

<h3>Severity</h3>

<p>From <a href="http://perlcritic.tigris.org/"><code>Perl::Critic</code></a> page:</p>

<blockquote>
<p>severity is the level of importance you wish to assign to the Policy. All Policy modules are defined with a default severity value ranging from 1 (least severe) to 5 (most severe). However, you may disagree with the default severity and choose to give it a higher or lower severity, based on your own coding philosophy. You can set the severity to an integer from 1 to 5, or use one of the equivalent names:</p>

<pre class="code ruby"><code> SEVERITY NAME ...is equivalent to... SEVERITY NUMBER
 ----------------------------------------------------
 gentle                                             5
 stern                                              4
 harsh                                              3
 cruel                                              2
 brutal                                             1
</code></pre>
</blockquote>

<h3>Policy style</h3>

<p>Banalizer&#39;s policy style more or less correspond to <code>Perl::Critic</code>&#39;s policy theme with exclusion of Perl specific themes. Again quote from <code>Perl::Critic</code>:</p>

<blockquote>
<pre class="code ruby"><code>   THEME             DESCRIPTION
   --------------------------------------------------------------------------
   core              All policies that ship with Perl::Critic
   pbp               Policies that come directly from &quot;Perl Best Practices&quot;
   bugs              Policies that that prevent or reveal bugs
   maintenance       Policies that affect the long-term health of the code
   cosmetic          Policies that only have a superficial effect
   complexity        Policies that specificaly relate to code complexity
   security          Policies that relate to security issues
   tests             Policies that are specific to test scripts
</code></pre>
</blockquote>

<p>See <a href="http://perlcritic.tigris.org/#THE%20POLICIES">http://perlcritic.tigris.org/#THE%20POLICIES</a></p>

<h1>Conventions</h1>

<h2>Policies</h2>

<ul>
<li><p>All policies (policy files) installed in <code>./lib/policies</code> directory. </p>

<p>Note: There could be other (additionally) policy directories added in the future, like for example <code>~/.banalizer</code> or similar</p></li>
<li><p>There are two classes of policies recognized by Banalizer: Ruby and <em>&#39;other&#39;</em></p></li>
<li><p>Ruby policy files detected by <code>.rb</code> extension. Files without <code>.rb</code> extension are considered to be &#39;others&#39;</p></li>
<li><p>Policy name is detected from</p>

<ul>
<li>file name of &#39;other&#39; policy</li>
<li>first argument for <code>banalizer</code> method for Ruby policy</li>
</ul></li>
<li><p>all names should be unique, or they will be overwritten</p></li>
</ul>

<h3>Attributes</h3>

<p>All policies have these attributes:</p>

<ul>
<li>policy (i.e. name)</li>
<li>synopsis</li>
<li>description</li>
<li>severity</li>
<li>style</li>
</ul>

<p>Depending on the type of policy some of the attributes are required, some optional or can be set to reasonable default.</p>

<h3>Non-ruby policies (i.e. others)</h3>

<p>Policy should conform to few rules:</p>

<ol>
<li><p>it must return information about itself when called with parameter <code>config</code></p>

<ul>
<li>Output of the <code>config</code> command is YAML formatted text</li>
<li>Command returns attributes names and values of the policy</li>
<li><p>All attributes in case of &#39;other&#39; policy are optional</p>

<p>They are either set to default values if missing, or detected from other meta-data (like, for example, name of a policy is <code>$(basename file)</code> of policy file.</p></li>
</ul></li>
<li><p>Policy script must be able to perform single (syntax/semantic/format) check on bash script file and:</p>

<ul>
<li>return non-zero status if check fails or 0 if succeeds</li>
<li>return (optional) error massages on STDOUT</li>
</ul>

<p><strong>Note</strong>: Only STDOUT is honored by Banalizer. </p>

<p>If your check command, for example, prints to STDERR but not to STDOUT, you&#39;d need to redirect shell streams accordingly.</p></li>
</ol>

<h4>Example config section</h4>

<pre class="code yaml"><code>    ---
    name: $(basename $0)
    style: 
      - :bug
      - :test
    severity: 5
    description: Runs bash syntax check using 'bash -n' option
</code></pre>

<h3>Ruby policy</h3>

<ol>
<li>Ruby policy has two required items: 

<ul>
<li>name  (_Note_: to avoid clashes with Ruby standard <code>name</code> method we use <code>policy</code> DSL method)</li>
<li>must define method called <code>run</code></li>
</ul></li>
<li>Policy is defined in top-level namespace&#39;s method called <code>banalizer</code>

<ul>
<li>name is string or Ruby symbol parameter to <code>banalizer</code> method</li>
<li>additional (optional) attributes are defined as DSL methods calls inside block given to <code>banalizer</code> method</li>
<li>run method is defined in the same block</li>
</ul></li>
<li>DSL methods names correspond to policy attributes :

<ul>
<li>policy (i.e. policy name)</li>
<li>synopsis</li>
<li>description</li>
<li>style</li>
<li>severity</li>
</ul></li>
<li><code>run</code> method :

<ul>
<li>need to return result of a check as something that can be evaluated into true or false</li>
<li>optionally can pass along error messages from the check, using <code>errors.add</code> DLS method to populate errors object (instance of <span class='object_link'><a href="Banalize/Errors.html" title="Banalize::Errors (class)">Banalize::Errors</a></span> class</li>
</ul></li>
</ol>

<h4>Example</h4>

<p>This is full working example of Ruby DSL policy:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_banalizer'>banalizer</span> <span class='symbol'>:shebang_format</span> <span class='kw'>do</span>

  <span class='id identifier rubyid_synopsis'>synopsis</span>    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Format of shebang should be #!/usr/bin/env bash</span><span class='tstring_end'>'</span></span>
  <span class='id identifier rubyid_severity'>severity</span>    <span class='int'>5</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_lines'>lines</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^\#!/usr/bin/env\s+bash</span><span class='regexp_end'>}</span></span>

      <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First line is not in the format #!/usr/bin/env bash</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>1</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

<span class='kw'>end</span>
</code></pre>

<!--  LocalWords:  banalize
 -->
</div></div>

    <div id="footer">
  Generated on Thu Mar  7 14:32:09 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>